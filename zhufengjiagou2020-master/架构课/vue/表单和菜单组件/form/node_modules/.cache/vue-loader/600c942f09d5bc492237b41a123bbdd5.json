{"remainingRequest":"/Users/1000x/.config/yarn/global/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/1000x/个人项目/珠峰js+架构课/mycode/架构课/vue/表单和菜单组件/2/components/el-form-item.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/1000x/个人项目/珠峰js+架构课/mycode/架构课/vue/表单和菜单组件/2/components/el-form-item.vue","mtime":1583677047514},{"path":"/Users/1000x/.config/yarn/global/node_modules/babel-loader/lib/index.js","mtime":1572351717662},{"path":"/Users/1000x/.config/yarn/global/node_modules/cache-loader/dist/cjs.js","mtime":1572351730758},{"path":"/Users/1000x/.config/yarn/global/node_modules/vue-loader/lib/index.js","mtime":1582438508466}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBTY2hlbWEgZnJvbSAnYXN5bmMtdmFsaWRhdG9yJzsKZXhwb3J0IGRlZmF1bHQgewogICAgbmFtZTogJ2VsLWZvcm0taXRlbScsCiAgICBpbmplY3Q6WydlbEZvcm0nXSwKICAgIGRhdGEoKXsKICAgICAgICByZXR1cm57CiAgICAgICAgICAgIGVycm9yTWVzc2FnZTonJwogICAgICAgIH0KICAgIH0sCiAgICBwcm9wczp7CiAgICAgICAgbGFiZWw6eyAvL+agh+etvgogICAgICAgICAgICB0eXBlOlN0cmluZywKICAgICAgICAgICAgZGVmYXVsdDonJwogICAgICAgIH0sCiAgICAgICAgcHJvcDpTdHJpbmcgLy/lvZPliY3moKHpqozlk6rkuKrlsZ7mgKcs5L6L77yacHJvcD1uYW1lCiAgICB9LAogICAgbW91bnRlZCAoKXsKICAgICAgICAvLyDnm5HlkKzlrZDnu4Tku7ZlbC1pbnB1dOeahOi+k+WFpeS6i+S7tgogICAgICAgIHRoaXMuJG9uKCd2YWxpZGF0ZScsZnVuY3Rpb24oKXsKICAgICAgICAgICAgdGhpcy52YWxpZGF0ZSgpOwogICAgICAgIH0pOwogICAgfSwKICAgIG1ldGhvZHM6ewogICAgICAgIHZhbGlkYXRlKCl7CiAgICAgICAgICAgIGlmKHRoaXMucHJvcCl7CiAgICAgICAgICAgICAgICAvL+iOt+WPluagoemqjOinhOWImQogICAgICAgICAgICAgICAgbGV0IHJ1bGUgPSB0aGlzLmVsRm9ybS5ydWxlc1t0aGlzLnByb3BdOwogICAgICAgICAgICAgICAgbGV0IG5ld1ZhbHVlID0gdGhpcy5lbEZvcm0ubW9kZWxbdGhpcy5wcm9wXTsKICAgICAgICAgICAgICAgIC8vZWwtZm9ybeS9v+eUqOS6hmFzeW5j6aqM6K+B5bqTCiAgICAgICAgICAgICAgICBsZXQgZGVzY3JpcHRvciA9IHsgIC8v5b2T5YmN5bGe5oCn55qE5o+P6L+wCiAgICAgICAgICAgICAgICAgICAgW3RoaXMucHJvcF0gOiBydWxlCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgbGV0IHNjaGVtYSA9IG5ldyBTY2hlbWEoZGVzY3JpcHRvcik7ICAgIC8v6YCa6L+H5o+P6L+w5L+h5oGv5Yib5bu65LiA5Liq6aqo5p62CiAgICAgICAgICAgICAgICByZXR1cm4gc2NoZW1hLnZhbGlkYXRlKHtbdGhpcy5wcm9wXTpuZXdWYWx1ZX0sKGVycixyZXMpPT57CiAgICAgICAgICAgICAgICAgICAgaWYoZXJyKXsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lcnJvck1lc3NhZ2UgPSBlcnJbMF0ubWVzc2FnZTsKICAgICAgICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzKTsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lcnJvck1lc3NhZ2UgPSAnJzsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQp9Cg=="},{"version":3,"sources":["el-form-item.vue"],"names":[],"mappings":";;;;;;;;;AASA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"el-form-item.vue","sourceRoot":"components","sourcesContent":["<template>\n    <div>\n        <label v-if=\"label\">{{label}}</label>\n        <!-- el-input组件 -->\n        <slot></slot>\n        {{errorMessage}}\n    </div>\n</template>\n<script>\nimport Schema from 'async-validator';\nexport default {\n    name: 'el-form-item',\n    inject:['elForm'],\n    data(){\n        return{\n            errorMessage:''\n        }\n    },\n    props:{\n        label:{ //标签\n            type:String,\n            default:''\n        },\n        prop:String //当前校验哪个属性,例：prop=name\n    },\n    mounted (){\n        // 监听子组件el-input的输入事件\n        this.$on('validate',function(){\n            this.validate();\n        });\n    },\n    methods:{\n        validate(){\n            if(this.prop){\n                //获取校验规则\n                let rule = this.elForm.rules[this.prop];\n                let newValue = this.elForm.model[this.prop];\n                //el-form使用了async验证库\n                let descriptor = {  //当前属性的描述\n                    [this.prop] : rule\n                };\n                let schema = new Schema(descriptor);    //通过描述信息创建一个骨架\n                return schema.validate({[this.prop]:newValue},(err,res)=>{\n                    if(err){\n                        this.errorMessage = err[0].message;\n                    }else{\n                        console.log(res);\n                        this.errorMessage = '';\n                    }\n                })\n            }\n        }\n    }\n}\n</script>"]}]}