{"remainingRequest":"/Users/1000x/.config/yarn/global/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/1000x/个人项目/珠峰js+架构课/mycode/架构课/vue/表单和菜单组件/2/components/el-form.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/1000x/个人项目/珠峰js+架构课/mycode/架构课/vue/表单和菜单组件/2/components/el-form.vue","mtime":1584197116552},{"path":"/Users/1000x/.config/yarn/global/node_modules/babel-loader/lib/index.js","mtime":1572351717662},{"path":"/Users/1000x/.config/yarn/global/node_modules/cache-loader/dist/cjs.js","mtime":1572351730758},{"path":"/Users/1000x/.config/yarn/global/node_modules/vue-loader/lib/index.js","mtime":1582438508466}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICAgIG5hbWU6ICdlbC1mb3JtJywKICAgIHByb3ZpZGUoKXsKICAgICAgICByZXR1cm4ge2VsRm9ybTp0aGlzfQogICAgfSwKICAgIHByb3BzOnsKICAgICAgICBtb2RlbDp7ICAvLyBtb2RlbD1ydWxlRm9ybSAoQXBwLnZ1ZSkKICAgICAgICAgICAgdHlwZTpPYmplY3QsCiAgICAgICAgICAgIGRlZmF1bHQ6KCk9Pnt9IC8v5L+d6K+B57uE5Lu26Ze055qE5pWw5o2u5piv54us56uL55qEICAKICAgICAgICB9LAogICAgICAgIHJ1bGVzOk9iamVjdAoKICAgIH0sCiAgICBtZXRob2RzOnsKICAgICAgICBhc3luYyB2YWxpZGF0ZShjYil7CiAgICAgICAgICAgIC8v6LCD55So5omA5pyJ55qEZm9ybS1pdGVt55qEdmFsaWRhdGXmlrnms5Ug55yL5piv5ZCm6YCa6L+HCiAgICAgICAgICAgIGxldCBjaGlsZHJlbiA9IHRoaXMuJGNoaWxkcmVuOwogICAgICAgICAgICBsZXQgYXJyID0gW107CiAgICAgICAgICAgIGZ1bmN0aW9uIGZpbmRGb3JtSXRlbShjaGlsZHJlbil7CiAgICAgICAgICAgICAgICBjaGlsZHJlbi5mb3JFYWNoKGNoaWxkID0+IHsKICAgICAgICAgICAgICAgICAgICBpZihjaGlsZC4kb3B0aW9ucy5uYW1lID09PSAnZWwtZm9ybS1pdGVtJyl7CiAgICAgICAgICAgICAgICAgICAgICBhcnIucHVzaChjaGlsZCk7ICAKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgaWYoY2hpbGQuJGNoaWxkcmVuKXsKICAgICAgICAgICAgICAgICAgICAgICAgZmluZEZvcm1JdGVtKGNoaWxkLiRjaGlsZHJlbik7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZmluZEZvcm1JdGVtKGNoaWxkcmVuKTsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIGF3YWl0IFByb21pc2UuYWxsKGFyci5tYXAoY2hpbGQgPT4gewogICAgICAgICAgICAgICAgICAgIGNoaWxkLnZhbGlkYXRlKCk7CiAgICAgICAgICAgICAgICB9KSkKICAgICAgICAgICAgICAgIGNiKHRydWUpOwogICAgICAgICAgICB9Y2F0Y2ggewogICAgICAgICAgICAgICAgY2IoZmFsc2UpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIAogICAgICAgIH0KICAgIH0KfQo="},{"version":3,"sources":["el-form.vue"],"names":[],"mappings":";;;;;;;AAOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"el-form.vue","sourceRoot":"components","sourcesContent":["<template>\n    <div>\n        <slot></slot>\n    </div>\n    \n</template>\n<script>\nexport default {\n    name: 'el-form',\n    provide(){\n        return {elForm:this}\n    },\n    props:{\n        model:{  // model=ruleForm (App.vue)\n            type:Object,\n            default:()=>{} //保证组件间的数据是独立的  \n        },\n        rules:Object\n\n    },\n    methods:{\n        async validate(cb){\n            //调用所有的form-item的validate方法 看是否通过\n            let children = this.$children;\n            let arr = [];\n            function findFormItem(children){\n                children.forEach(child => {\n                    if(child.$options.name === 'el-form-item'){\n                      arr.push(child);  \n                    }\n                    if(child.$children){\n                        findFormItem(child.$children);\n                    }\n                });\n            }\n            findFormItem(children);\n            try {\n                await Promise.all(arr.map(child => {\n                    child.validate();\n                }))\n                cb(true);\n            }catch {\n                cb(false);\n            }\n            \n        }\n    }\n}\n</script>"]}]}